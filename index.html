<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>LL Samples Links</title>

<!-- Biblioteca html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  display: flex;
  margin: 0;
  background: #f9f9f9;
  color: #333;
}
.container {
  display: flex;
  width: 100%;
  height: 100vh;
}
.form-panel {
  width: 35%;
  background: #fff;
  box-shadow: 2px 0 8px rgba(0,0,0,0.15);
  padding: 25px;
  overflow-y: auto;
}
.preview-panel {
  flex: 1;
  padding: 25px;
  overflow-y: auto;
}
h2 { margin-top: 0; color: #111; }
label { font-weight: 600; margin-top: 15px; display: block; }
input, textarea {
  width: 90%;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 8px;
  margin-top: 5px;
}
.desconto-group {
  display: flex;
  gap: 10px;
}
.desconto-group input { flex: 0,3; }

.sample-list {
  max-height: 270px;
  overflow-y: auto;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 8px 10px;
  background: #fafafa;
}

/* Cada item: checkbox + nome alinhados √† esquerda */
.sample-item {
  display: block;            /* remove o flex */
  margin-bottom: 6px;
  text-align: left;
}

/* Checkbox e texto ficam lado a lado, alinhados √† esquerda */
.sample-item input[type="checkbox"] {
  position: relative;
  top: 38px;                  /* üîπ ajusta a posi√ß√£o vertical em 2px */
  margin-left: 10px
  margin-right: 8px;
  left: 50px;
  transform: scale(1.2);
  accent-color: #0078d7;
  cursor: pointer;
}

/* Label normal, sem for√ßar alinhamento */
.sample-item label {
  cursor: pointer;
  font-weight: 500;
}


button {
  padding: 10px 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  color: white;
  margin-top: 15px;
  margin-right: 8px;
}
button:hover { opacity: 0.9; }
.btn-generate { background: #0078d7; }
.btn-copy { background: #28a745; }
.btn-pdf { background: #6c757d; }
.btn-clear { background: #dc3545; }
.btn-select { background: #ff9800; color: #fff; }

.preview-panel h2 {
  color: #0078d7;
  border-bottom: 2px solid #0078d7;
  padding-bottom: 5px;
}
#previewArea {
  background: #fff;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 0 8px rgba(0,0,0,0.1);
}
.total { font-weight: 700; font-size: 1.1em; margin-top: 10px; }
.valor-final {
  color: #28a745;
  font-weight: 700;
  font-size: 1.2em;
  margin-top: 4px;
}
.desconto-texto {
  color: #d9534f;
  font-weight: 600;
  margin-top: 5px;
}
@media print {
  body * { visibility: hidden; }
  #previewArea, #previewArea * { visibility: visible; }
  #previewArea { position: absolute; left: 0; top: 0; width: 100%; }
}
.logo-box {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 15px;
}
.btn-logo {
  background: #0078d7;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 6px;
  padding: 8px 10px;
  font-size: 0.9em;
}
.logo-preview {
  height: 45px;
  width: auto;
  border-radius: 6px;
  border: 1px solid #ddd;
  display: none;
}
.no-results {
  text-align: center;
  color: #999;
  font-style: italic;
}
<style>
/* Fonte global id√™ntica √† usada na parte superior */
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  font-size: 16px;
  color: #222;
  line-height: 1.5;
}

/* Garante que a pr√©-visualiza√ß√£o e a mensagem final usem a mesma fonte */
pre, code, .msg-preview {
  font-family: 'Segoe UI', Arial, sans-serif !important;
  font-size: 16px;
  white-space: pre-wrap; /* Permite quebra de linha natural */
  word-wrap: break-word;
  background: none;
  border: none;
  color: #222;
}

/* Links clic√°veis e bonitos */
a {
  color: #1a73e8;
  text-decoration: none;
  font-weight: 500;
}

a:hover {
  text-decoration: underline;
}
/* üì± Layout responsivo para mobile */
@media (max-width: 758px) {
  body {
    flex-direction: column;
  }

  .container {
    flex-direction: column;
    height: auto;
  }

  .form-panel {
    width: 93%;
    box-shadow: none;
    border-bottom: 2px solid #0078d7;
    padding: 20px;
  }

  .preview-panel {
    width: 93%;
    padding: 15px;
  }

  h2 {
    font-size: 1.2em;
  }

  input, textarea, button {
    font-size: 1em;
  }

  button {
    width: 100%;
    margin-top: 10px;
  }

  .sample-list {
    max-height: 200px;
  }

  .logo-box {
    flex-direction: column;
    align-items: flex-start;
  }

  .logo-preview {
    height: 40px;
  }
}
<meta name="viewport" content="width=device-width, initial-scale=1.0">

</style>
</head>
<body>
<div class="container">
  <div class="form-panel">
    <div class="logo-box">
      <!-- <input type="file" id="logoInput" accept="image/png,image/jpeg" hidden> -->
     <!-- Remova ou comente -->
<!-- <button type="button" onclick="document.getElementById('logoInput').click()" class="btn-logo">Importar Logo (PNG)</button> -->

      <img id="logoPreview" 
     src="https://raw.githubusercontent.com/ciliocavalcante-design/imagesll/2f3f0447d9d7afa76f017257d899151e0b7468bb/Layer%205.png" 
     alt="Logo LL Samples" 
     class="logo-preview" 
     style="display:block;">
    </div>

    <h2>‚ö° LL Samples Links</h2>
    <label>Cliente</label>
    <input type="text" id="cliente" placeholder="Nome do cliente"/>
    <label>Contato (WhatsApp / E-mail)</label>
    <input type="text" id="contato" placeholder="(xx) xxxxx-xxxx / email"/>
    <div class="desconto-group">
      <div>
        <label>Desconto (%)</label>
        <input type="number" id="descontoPerc" placeholder="0" min="0" max="100"/>
      </div>
      <div>
        <label>Desconto (R$)</label>
        <input type="number" id="descontoVal" placeholder="0" min="0"/>
      </div>
    </div>

    <label>Buscar Samples</label>
    <input type="text" id="sampleSearch" placeholder="Filtrar por nome..."/>
    <button class="btn-select" id="toggleSelect">Selecionar Todos</button>
    <div id="samplesContainer" class="sample-list"></div>

    <label>Mensagem adicional</label>
    <textarea id="mensagem" rows="4" placeholder="Ex: Obrigado pela compra!"></textarea>

    <div>
  <button class="btn-generate" onclick="gerarMensagem()">Gerar</button>
  <button class="btn-copy" onclick="copiarMensagem()">Copiar</button>
  <button class="btn-pdf" onclick="salvarPDF()">Salvar PDF (A4)</button>
  <button class="btn-pdf" onclick="salvarPDFResumido()">Gerar PDF Resumido</button>
  <button class="btn-clear" onclick="limparCampos()">Limpar</button>
  <button class="btn-copy" onclick="copiarParteCima()">Copiar Parte de Cima</button>
  <button class="btn-copy" onclick="copiarParteBaixo()">Copiar Parte de Baixo</button>
  <button class="btn-pdf" onclick="salvarPDFComLinks()">Gerar PDF com Links</button>
  <button class="btn-copy" onclick="copiarParteCimaComVideos()">üìã Copiar com V√≠deos üé•</button>



</div>

  </div>

  <div class="preview-panel">
    <h2>üìú Pr√©-visualiza√ß√£o</h2>
    <div id="previewArea">
      <p><i>Preencha os campos e clique em "Gerar" para ver o resultado.</i></p>
    </div>
  </div>
</div>

<script>
const rawData = `LL Guitarra Forr√≥|https://we.tl/t-A4Ew2QUAJB|70
LL Pacote Produ√ß√£o Guilherme Silva|https://we.tl/t-Tjxvc3Rd2F|70
LL Pacote Produ√ß√£o Arrocha|https://we.tl/t-wZBxe3EY45|70
LL Drums Lux√∫ria|https://we.tl/t-sOKvmYTeba|70
LL Drums Forr√≥ Boys|https://we.tl/t-33vFy84BCc|70
LL Drums Rey Vaqueiro|https://we.tl/t-X7czSaAMUC|70
LL Piano Rom√¢ntico|https://we.tl/t-6XCHLMaDxg|70
LL Acordeon Forro|https://we.tl/t-V43HGqOltJ|70
LL Pacote Produ√ß√£o Claudio Ney e Juliana|https://we.tl/t-gBmwFO0DvT|70
LL Drums Claudio Ney e Juliana|https://we.tl/t-TsqiiBAtJc|70
LL Drums Pablo|https://we.tl/t-BgtpHY5DGF|70
LL Drums Safadao Vaquejada|https://we.tl/t-MDmiYIsrAh|70
LL Violao Pop v3|https://we.tl/t-3z8qb81air|90
LL Drums Thales Play|https://we.tl/t-62ubOmLvYN|70
LL Drums Flavio Pizada Quente|https://we.tl/t-6On11FD1eh|70
LL Drums Forrozin Os Feras|https://we.tl/t-h90VRID5oq|70
LL Pacote Producao Arrasta-Pe (Completo)|https://we.tl/t-ATvLvobtIp|70
LL Pacote Producao Arrasta-Pe (Acomp)|https://we.tl/t-FXIj0AOKfd|70
LL Drums Arrasta-P√© v2|https://we.tl/t-NoKPP4aXQ4|70
LL Drums Ronny Arrocha 2025|https://we.tl/t-lf2a3LVTiM|70
LL Drums Guilherme Silva|https://we.tl/t-A1jkYPpdPe|70
LL Pacote Produ√ß√£o Nattan|https://we.tl/t-KchmIqMh40|70
LL Keys Pagodao|https://we.tl/t-cx1dGwp8VZ|70
LL Bass Pagodao v2|https://we.tl/t-5OD55VV8jV|70
LL Guitarra Pagodao v3|https://we.tl/t-XfPLuZeMKt|80
LL Drums Marcynho Batidao|https://we.tl/t-M9MoLqked0|70
LL Bass Forro Romantico|https://drive.google.com/file/d/1898UCZGQxkTmGZpSuzwgXHzma2FIU8Ha/view?usp=sharing|70
LL Guitarra Batidao Cliente|https://we.tl/t-9rzahb01qQ|70
LL Drums Leo Foguete|https://we.tl/t-bigeRFrIid|70
LL Drums Seresta do Rasta|https://we.tl/t-443amgNrgX|70
LL Drums Desejo|https://we.tl/t-rAX2ZKrD1f|70
LL Drums Nattan Forr√≥|https://we.tl/t-TVQXS9gA1N|70
LL Bai√£o Drums|https://we.tl/t-9yy30zdwQe|60
LL Drums Arrocha Safad√£o|https://we.tl/t-ilRPcNmESs|70
LL Bass Arrocha v2 ‚Äì Seresta|https://we.tl/t-6imvI338cV|70
LL Guitarra Arrocha v2 ‚Äì Seresta|https://we.tl/t-zTFzOIXQdw|70
LL Drums Natanzinho Lima|https://we.tl/t-FD3k5FsUFm|70
LL Drums Henry Freitas|https://we.tl/t-tEih1L8lWf|60
LL Lambada Drums|https://we.tl/t-2K3xKlLPd1|60
LL Calypso Drums|https://we.tl/t-iO1rDKuKk6|60
LL Ukulele Prime|https://we.tl/t-3CYu4WEm3G|70
LL Arraia Drums|https://we.tl/t-G7KbyQDiRT|60
LL Arrocha Drums v2|https://we.tl/t-AW7fM79rdm|70
LL Forro Romantico Drums v2|https://we.tl/t-quDpt15hJp|70
LL Forrozao Drums v1.1|https://we.tl/t-5wNcqaukez|70
LL Forro Vaneirao Drums|https://we.tl/t-TGFP8fvGel|70
LL Violao Pop 6-8|https://we.tl/t-bc5emlSUfT|80
LL Strings|https://we.tl/t-rdRGMZE689|60
LL Acordeon Arrasta-Pe|https://we.tl/t-Aodh8BGNaq|70
LL Violao Pop v2|https://we.tl/t-eJQEVhrOwP|80
LL Bass Pagode|https://we.tl/t-kW9SfLwLdx|60
LL Bass Forrozao|https://we.tl/t-r8ZoQYEtTx|60
LL Acordeon Forrozao|https://we.tl/t-SykpVseEtv|60
LL Guitarra Forrozao|https://we.tl/t-KFwb1njQYH|60
LL Bass Pagodao|https://we.tl/t-BFP7ZMwIia|70
LL Guitarra Pagod√£o v2|https://we.tl/t-7fdXWwoMab|70
LL Pagodao Rythm v2|https://we.tl/t-gmmNbJoTPv|70
LL Guitarra Axe v2|https://we.tl/t-JCxKmKDmya|60
LL Bass Ax√©|https://we.tl/t-3srGMlsJ1Y|70
LL Ax√© Rythm v2|https://we.tl/t-9LJU7Vkrx5|80
LL Cavaco Prime v2|https://we.tl/t-Jb4VPbunjv|70
LL Acordeon Vaneira|https://we.tl/t-6fRj1xqomM|60
LL Violao Pagode Samba|https://we.tl/t-EFoy4Nktqa|60
LL Drums Manu Bahtidao|https://we.tl/t-Z32LRxNIWK|60
LL Vaneira Drums|https://llsamples.wetransfer.com/downloads/c31dd871623ddfcca6e607c17e0bd29c20231102143806/2db1dc|60
LL Viol√£o Pop|https://we.tl/t-rV6qSEqEWm|60
LL Acordeon Arrocha|https://we.tl/t-2SmOxCNSaQ|60
LL Guitarra Calypso|https://we.tl/t-O7W7gcsU8C|60
LL Drums Felipe Amorim|https://we.tl/t-Q9Uf1REz6U|60
LL Drums Z√© Felipe|https://we.tl/t-maTiBIRkrb|60
LL Drums Mari Fernandez|https://we.tl/t-4EfvrsG9hy|60
LL Bass Piseiro v2|https://we.tl/t-39yuZbEsFL|60
LL Guitarra Piseiro v3|https://we.tl/t-DSbFhmJmZ7|80
LL Pagode Drums e Percussion|https://we.tl/t-APlWBSIuiX|60
LL Viol√£o Vaneira|https://we.tl/t-nCV8299ACI|60
LL Iguinho e Lulinha Drums|https://we.tl/t-5V7Rz3OVDz|60
LL Bass Arrasta-Pe|https://we.tl/t-qPeCOnAwUB|40
LL Metais v3|https://we.tl/t-L34E3D5HdV|80
LL Forro Romantico Drums|https://we.tl/t-l59oJk3p35|60
LL Viol√£o Arrocha 1.5 (Re-Edition)|https://we.tl/t-6B3L5R9OGH|60
LL Guitarra Arrasta-Pe|https://we.tl/t-JrSmmxw6ry|40
LL Arrasta-Pe Drums 1.5|https://we.tl/t-pKOf0U5Eh7|60
LL Metais 2.0|https://we.tl/t-MKUVnqz8ZY|80
LL Arrocha Drums Nadson|https://we.tl/t-hoXjx4u3PT|60
LL Arrocha Percussao|https://we.tl/t-nn9VOw6hBs|60
LL Cavaco Prime|https://we.tl/t-uQCehAvWeG|60
LL Arrasta-Pe Drums|https://we.tl/t-0r7f2BEL3w|60
LL Violao Arrocha|https://we.tl/t-yrFYMRo4DK|60
LL Bass Arrocha|https://we.tl/t-YBfLYqJ8V4|60
LL Guitarra Arrocha|https://we.tl/t-1QxsdF9O6s|60
LL Arrocha Drums|https://we.tl/t-11PiNdzx8c|70
LL Acordeon Piseiro 2.0|https://we.tl/t-oGApkBFIsz|70
LL Piseiro Drums Summer|https://we.tl/t-fbjtoCEFMt|70
LL Guitarra Piseiro 2.0|https://we.tl/t-Nq7AtFuS9p|70
LL Guitarra Pagod√£o|https://we.tl/t-fP7wwxZyo9|70
LL Pagodao Drums e Percussion|https://we.tl/t-osPpMZJvdK|70
LL Ax√© Drums|https://we.tl/t-vKJhRMQZdW|60
LL Guitarra Ax√©|https://we.tl/t-tkBHwma7i9|60
LL Ax√© Percuss√£o|https://we.tl/t-GzpWciGqxv|60
LL Piseiro Drums 2.0|https://we.tl/t-hTxGff7AWF|80
LL Piseiro Drums 1.5|https://we.tl/t-FDr6vE3wTu|80
LL Pe de Serra Drums e Perc|https://we.tl/t-tdhd8ywv43|60
LL Acordeon P√©-de-Serra|https://we.tl/t-PJPD52SvAP|60
LL Guitarra Bregadeira|https://we.tl/t-IIpAMRqb43|60
LL Bregadeira Drums|https://we.tl/t-XO4bpzkUc3|60
LL Percussao Piseiro|https://we.tl/t-AkdH5n4urs|60
LL Piseiro Bass|https://we.tl/t-jHxJby32BK|60
LL Guitarra Piseiro|https://we.tl/t-kh42BhY7mY|60
LL Acordeon Piseiro|https://we.tl/t-ifxFvZRXfD|60
LL WS Drums|https://we.tl/t-1AcuGoU6aV|60
LL Piseiro Drums v1|https://we.tl/t-ey1c3nhK3P|60
LL Metais|https://we.tl/t-K8mFDCeNtj|60
LL Sax v1.5|https://we.tl/t-o2dsHa2y7j|60`;

const samplesData = rawData.split("\n").map(l => {
  const [nome, link, valor] = l.split("|");
  return { nome, link, valor: parseFloat(valor) };
});

let selectedSamples = new Set();
const container = document.getElementById("samplesContainer");

function renderSamples(filter="") {
  container.innerHTML = "";
  const filtered = samplesData.filter(s => s.nome.toLowerCase().includes(filter.toLowerCase()));
  if (filtered.length === 0) {
    container.innerHTML = "<p class='no-results'>Nenhum sample encontrado.</p>";
    return;
  }
  filtered.forEach((s, i) => {
    const globalIndex = samplesData.indexOf(s);
    const div = document.createElement("div");
    div.className = "sample-item";
    const checked = selectedSamples.has(globalIndex) ? "checked" : "";
    div.innerHTML = `
      <input type="checkbox" value="${globalIndex}" ${checked}>
      <label>${s.nome} - R$${s.valor}</label>`;
    container.appendChild(div);
  });
}
renderSamples();

container.addEventListener("change", e => {
  if (e.target.type === "checkbox") {
    const id = parseInt(e.target.value);
    e.target.checked ? selectedSamples.add(id) : selectedSamples.delete(id);
  }
});

document.getElementById("sampleSearch").addEventListener("input", e => renderSamples(e.target.value));

document.getElementById("toggleSelect").addEventListener("click", () => {
  const allSelected = selectedSamples.size === samplesData.length;
  selectedSamples = allSelected ? new Set() : new Set(samplesData.map((_, i) => i));
  renderSamples(document.getElementById("sampleSearch").value);
  document.getElementById("toggleSelect").textContent = allSelected ? "Selecionar Todos" : "Limpar Sele√ß√£o";
});

function gerarMensagem() {
  const cliente = document.getElementById("cliente").value.trim();
  const contato = document.getElementById("contato").value.trim();
  const perc = parseFloat(document.getElementById("descontoPerc").value) || 0;
  const val = parseFloat(document.getElementById("descontoVal").value) || 0;
  const msgAdd = document.getElementById("mensagem").value.trim();
  const logoSrc = document.getElementById("logoPreview").src;
  const qtdSamples = selectedSamples.size;

  if (qtdSamples === 0) { alert("Selecione ao menos um sample."); return; }

  let total = 0, listaHTML = "", msg = "üéπ LL SAMPLES üéπ\n";
  msg += "\nüîóLinks adquiridos:\n";

selectedSamples.forEach(i => {
  const s = samplesData[i];
  // Mostra s√≥ o nome do sample (sem link) na parte de cima
  listaHTML += `<div>‚Ä¢ ${s.nome}</div>`;
  // Link clic√°vel apenas na parte de baixo (mensagem final)
  msg += `‚Ä¢ ${s.nome}\n<a href="${s.link}" target="_blank">${s.link}</a>\n`;
  total += s.valor;
});


 // Calcula descontos normalmente
const descPerc = total * (perc / 100);
const descTotal = descPerc + val;
const final = total - descTotal;

// ‚õîÔ∏è REMOVIDO: As linhas que mostravam ‚ÄúValor Total‚Äù, ‚ÄúDesconto‚Äù e ‚ÄúTotal com desconto‚Äù
// Elas geravam o trecho duplicado no final da mensagem

// Adiciona observa√ß√µes extras, se houver
if (msgAdd)
  msg += `\n\n${msgAdd}`;

// Mensagem final padr√£o da LL Samples
msg += `
‚ö° LL SAMPLES ‚ö°
üéπ Obrigado pela compra!!!
üëäüèª Marca l√° ‚Üí @llsamples_
\n‚§µÔ∏è Acesse nosso grupo para promo√ß√µes exclusivas e brindes!!! 
<a href="https://chat.whatsapp.com/KSSYxQZRanb5OyhRqwgHs6" target="_blank">https://chat.whatsapp.com/KSSYxQZRanb5OyhRqwgHs6
</a>
`;


  let descontoTexto = "";
if (perc > 0 || val > 0) {
  const valorPerc = perc > 0 ? total * (perc / 100) : 0; // üí° quanto equivale a % em reais
  const valorTotalDesc = valorPerc + val; // soma % + valor fixo
  descontoTexto = `üîªDesconto: `;
  if (perc > 0) descontoTexto += `${perc}% (${valorPerc.toLocaleString('pt-BR',{style:'currency',currency:'BRL'})}) `;
  if (val > 0) descontoTexto += `- ${val.toLocaleString('pt-BR',{style:'currency',currency:'BRL'})}`;
}

const descontoHTML = descontoTexto
  ? `<p class='desconto-texto'>${descontoTexto}</p>` 
  : "";


  const logoHTML = logoSrc ? `<div style="text-align:center;"><img src="${logoSrc}" alt="Logo" style="height:70px;margin-bottom:10px;"></div>` : "";

  document.getElementById("previewArea").innerHTML = `
    ${logoHTML}
    <h2 style="text-align:center;color:#0078d7;margin:5px 0;">üéπ LL SAMPLES üéπ</h2>
    <h3 style="text-align:center;margin-top:0;color:#333;">üåü OR√áAMENTO ESPECIAL ‚Äì ${qtdSamples} SAMPLE${qtdSamples>1?"S":""}</h3>
    <hr style="border:1px solid #0078d7;">
	
    ${cliente?`<p><strong>üë§Cliente:</strong> ${cliente}</p>`:""}
    ${contato?`<p><strong>üì≤Contato:</strong> ${contato}</p>`:""}
	<b>\nüóíÔ∏èSAMPLES SELECIONADOS:\n\n</b>
    ${listaHTML}
 ${(perc > 0 || val > 0) ? `<p class="total">üí∞ Valor Bruto: R$${total.toFixed(2)}</p>` : ""}
${descontoHTML}
  <p class="valor-final" style="color:#0078d7;">üí≥ Total Final (Cart√£o c/ acr√©scimo): <strong>R$${(final * 1.06).toFixed(2)}</strong></p>
  <p class="valor-final">üíµ Total Final (PIX): <strong>R$${final.toFixed(2)}</strong></p>


    ${msgAdd?`<p><em>${msgAdd}</em></p>`:""}
    <hr>
    <pre id="mensagemPronta">${msg}</pre>`;
}

function copiarMensagem() {
  const preview = document.getElementById("previewArea");
  if (!preview) return alert("Gere o or√ßamento primeiro!");

  // Clona toda a √°rea de pr√©-visualiza√ß√£o
  const clone = preview.cloneNode(true);

  // Pega o texto completo
  let texto = clone.innerText;

  // üîπ Limpa e normaliza
  texto = texto
    .replace(/\r/g, '')
    .replace(/[ \t]+/g, ' ')
    .replace(/\n\s*\n\s*\n+/g, '\n\n')
    .trim();

  // üîπ Melhora formata√ß√£o visual
  texto = texto
    .replace(/^üéπ LL SAMPLES üéπ\s*/m, 'üéπ LL SAMPLES üéπ\n\n')
    .replace(/üåü OR√áAMENTO ESPECIAL/g, ' üåü OR√áAMENTO ESPECIAL')
    .replace(/\n{2,}üóíÔ∏èSAMPLES SELECIONADOS:/, '\n\nüóíÔ∏èSAMPLES SELECIONADOS:')
    .replace(/üóíÔ∏èSAMPLES SELECIONADOS:\s*\n*/g, 'üóíÔ∏èSAMPLES SELECIONADOS:\n')
    .replace(/‚Ä¢\s*/g, '\n‚Ä¢ ') // for√ßa quebra de linha em cada item
    .replace(/\n{3,}/g, '\n\n');

  // üîπ Adiciona uma linha antes do valor bruto
  texto = texto.replace(/(‚Ä¢ [^\n]+)\n( üí∞ Valor Bruto)/, '$1\n\n$2');

  // üîπ PIX em it√°lico
  texto = texto.replace(/(üíµ Total Final \(PIX\): [^\n]+)/, '*$1*');

  // üîπ Compatibilidade WhatsApp (mant√©m espa√ßamento)
  texto = texto
    .replace(/\n\n/g, '\n\u200B\n')
    .replace(/\n{3,}/g, '\n\u200B\n')
    .trim();

  navigator.clipboard.writeText(texto)
    .then(() => alert("Mensagem completa copiada com formata√ß√£o!"))
    .catch(() => alert("Erro ao copiar."));
}


function limparCampos() {
  document.getElementById("cliente").value = "";
  document.getElementById("contato").value = "";
  document.getElementById("mensagem").value = "";
  document.getElementById("descontoPerc").value = "";
  document.getElementById("descontoVal").value = "";
  document.getElementById("logoPreview").style.display = "none";
  document.getElementById("logoPreview").src = "";
  selectedSamples.clear();
  renderSamples();
  document.getElementById("previewArea").innerHTML = '<p><i>Preencha os campos e clique em "Gerar".</i></p>';
}

// LOGO IMPORT
document.getElementById('logoInput').addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    document.getElementById('logoPreview').src = ev.target.result;
    document.getElementById('logoPreview').style.display = 'block';
  };
  reader.readAsDataURL(file);
});

// PDF (A4)

function salvarPDF() {
  const preview = document.getElementById('previewArea');
  if (!preview || preview.innerText.includes("Preencha os campos")) {
    alert("Gere o or√ßamento primeiro!");
    return;
  }

  // Fun√ß√£o auxiliar para normalizar nomes (remove acentos, normaliza h√≠fens, espa√ßos e caixa)
  function normalizeName(n) {
    return n
      .normalize('NFD')                    // separa acentos
      .replace(/[\u0300-\u036f]/g, '')     // remove acentos
      .replace(/[‚Äì‚Äî‚àí]/g, '-')              // normaliza travess√µes para h√≠fen simples
      .replace(/\s+/g, ' ')                // normaliza m√∫ltiplos espa√ßos
      .replace(/[^\w\s\-\/()]/g, '')       // remove caracteres estranhos (mant√©m letras, n√∫meros, espa√ßos, h√≠fen, barra, par√™nteses)
      .trim()
      .toLowerCase();
  }

  // Cria o clone da √°rea de pr√©-visualiza√ß√£o para manipular sem alterar a original
  const clone = preview.cloneNode(true);

  // Injeta estilo no clone para links azuis sem sublinhado (s√≥ para o PDF gerado)
  const style = document.createElement('style');
  style.innerHTML = `
    a { color: #1a73e8 !important; text-decoration: none !important; font-weight: 600 !important; }
    pre { white-space: pre-wrap; word-wrap: break-word; }
  `;
  clone.insertBefore(style, clone.firstChild);

  // Procura os n√≥s que representam cada sample no clone
  // Os seus items s√£o gerados como: <div>‚Ä¢ Nome do Sample</div>
  const allNodes = Array.from(clone.querySelectorAll("*"));

  allNodes.forEach(node => {
    if (!node.textContent) return;
    const text = node.textContent.trim();

    // Detecta itens que come√ßam com "‚Ä¢"
    if (text.startsWith("‚Ä¢")) {
      // extrai nome do pacote (remove marcador e poss√≠veis " - R$..." que j√° existam)
      let nomePacote = text.replace(/^‚Ä¢\s*/, '').trim();
      nomePacote = nomePacote.split(' - ')[0].split('|')[0].trim();

      // Normaliza pra comparar com samplesData
      const nomeNorm = normalizeName(nomePacote);

      // Tenta encontrar no array global samplesData com normaliza√ß√£o
      let sampleObj = (typeof samplesData !== "undefined") ? samplesData.find(s => normalizeName(s.nome) === nomeNorm) : null;

      // Se n√£o achar exato, tenta por inclus√£o parcial (mais tolerante)
      if (!sampleObj && typeof samplesData !== "undefined") {
        sampleObj = samplesData.find(s => {
          const sNorm = normalizeName(s.nome);
          return sNorm.includes(nomeNorm) || nomeNorm.includes(sNorm);
        });
      }

      // Se encontrou valor, atualiza o texto do node adicionando o pre√ßo ao lado
      if (sampleObj && typeof sampleObj.valor === "number") {
        const valorFormatado = sampleObj.valor.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        node.textContent = `‚Ä¢ ${nomePacote} - R$ ${valorFormatado}`;
      } else {
        node.textContent = `‚Ä¢ ${nomePacote}`;
      }
    }
  });

  // Mantemos a mensagem pronta (#mensagemPronta) se existir; n√£o removemos
  // Adicionamos um aviso promocional ao final do clone (opcional)
  const aviso = document.createElement("p");
  aviso.textContent = "üìå Aproveite agora e garanta j√° o seu!";
  aviso.style.textAlign = "center";
  aviso.style.marginTop = "20px";
  aviso.style.fontWeight = "600";
  aviso.style.color = "#0078d7";
  clone.appendChild(aviso);

  // Configura√ß√µes do PDF (mesmas que voc√™ vinha usando)
  const opt = {
    margin: 10,
    filename: 'Orcamento_LL_Samples.pdf',
    image: { type: 'jpeg', quality: 1 },
    html2canvas: { scale: 2, useCORS: true },
    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
  };

  // Gera o PDF a partir do clone (com pre√ßos adicionados e links destacados)
  html2pdf().set(opt).from(clone).save();
}


function salvarPDFResumido() {
  const preview = document.getElementById("previewArea");
  if (!preview || preview.innerText.includes("Preencha os campos")) {
    alert("Gere o or√ßamento primeiro!");
    return;
  }

  // Fun√ß√£o auxiliar para normalizar nomes (remove acentos, espa√ßos extras e diferen√ßas de caixa)
  function normalizeName(n) {
    return n
      .normalize('NFD')
      .replace(/[\u0300-\u036f]/g, '')
      .replace(/[‚Äì‚Äî‚àí]/g, '-')
      .replace(/\s+/g, ' ')
      .trim()
      .toLowerCase();
  }

  // Cria um clone da pr√©via atual para manipular sem alterar a original
  const clone = preview.cloneNode(true);

  // Remove tudo que vem ap√≥s o "Total Final" (ou a mensagem longa)
  const msgNode = clone.querySelector("#mensagemPronta");
  if (msgNode) msgNode.remove();

  // Percorre todos os elementos do clone para adicionar os valores ao lado dos nomes
  const allNodes = Array.from(clone.querySelectorAll("*"));

  allNodes.forEach(node => {
    if (!node.textContent) return;
    const text = node.textContent.trim();

    // Detecta os itens de sample (come√ßam com "‚Ä¢")
    if (text.startsWith("‚Ä¢")) {
      let nomePacote = text.replace(/^‚Ä¢\s*/, '').trim();
      nomePacote = nomePacote.split(' - ')[0].split('|')[0].trim();

      const nomeNorm = normalizeName(nomePacote);
      let sampleObj = (typeof samplesData !== "undefined") ? samplesData.find(s => normalizeName(s.nome) === nomeNorm) : null;

      // Busca parcial se n√£o encontrar o nome exato
      if (!sampleObj && typeof samplesData !== "undefined") {
        sampleObj = samplesData.find(s => {
          const sNorm = normalizeName(s.nome);
          return sNorm.includes(nomeNorm) || nomeNorm.includes(sNorm);
        });
      }

      // Se encontrou o valor, adiciona ao lado
      if (sampleObj && typeof sampleObj.valor === "number") {
        const valorFormatado = sampleObj.valor.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        node.textContent = `‚Ä¢ ${nomePacote} - R$ ${valorFormatado}`;
      } else {
        node.textContent = `‚Ä¢ ${nomePacote}`;
      }
    }
  });

  // Adiciona uma mensagem promocional ao final do clone
  const aviso = document.createElement("p");
  aviso.textContent = "üìå Aproveite agora e garanta j√° o seu!";
  aviso.style.textAlign = "center";
  aviso.style.marginTop = "20px";
  aviso.style.fontWeight = "600";
  aviso.style.color = "#0078d7";
  clone.appendChild(aviso);

  // Estilo para links azuis sem sublinhado no PDF
  const style = document.createElement("style");
  style.innerHTML = `
    a { color: #1a73e8 !important; text-decoration: none !important; font-weight: 600 !important; }
  `;
  clone.insertBefore(style, clone.firstChild);

  // Configura√ß√µes do PDF
  const opt = {
    margin: 10,
    filename: 'Orcamento_Resumido_LL_Samples.pdf',
    image: { type: 'jpeg', quality: 1 },
    html2canvas: { scale: 2, useCORS: true },
    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
  };

  // Gera o PDF com os valores adicionados
  html2pdf().set(opt).from(clone).save();
}


function salvarPDFComLinks() {
  const preview = document.getElementById("previewArea");
  if (!preview || preview.innerText.includes("Preencha os campos")) {
    alert("Gere o or√ßamento primeiro!");
    return;
  }

  // üé• Dicion√°rio de v√≠deos de demonstra√ß√£o
const videosDemo = {
  "LL Metais": "https://youtu.be/KuUTx8NzAr4?si=lbaaAjGnjUO9IpJc",
  "LL Sax v1.5": "https://youtu.be/YotFGV5IQl8?si=4ahVjkVZTQeqbfmK",
  "LL Piseiro Drums v1": "https://youtu.be/OnQKHjpjvaQ?si=hbo9pwX4DWucZPSb",
  "LL Bass Piseiro v1": "https://youtu.be/5K1IOqGaP6g?si=PYO9vBxuCGhiZkbR",
  "LL WS Drums": "https://youtu.be/8onKDOVKCxE?si=HcoB1ZkR_9_UjRS5",
  "LL Guitarra Piseiro v1": "https://youtu.be/rUvw79orXZg?si=q4JE8l1OrC4MuXQy",
  "LL Acordeon Piseiro": "https://youtu.be/wzNRhtxSIx0?si=yjudaYtzgVWlj7r6",
  "LL Percussao Piseiro": "https://youtu.be/I2Tu68topUU?si=IfW2expvkG41K0Po",
  "LL Bregadeira Drums": "https://youtu.be/IJNOLjdF_8o?si=BN-dy24wlx2L5giT",
  "LL Guitarra Bregadeira": "https://youtu.be/93LWdjfAIfg?si=oIe6KFojIkQZO8XR",
  "LL P√© de Serra Drums": "https://youtu.be/LAh_N1dgdRI?si=kq3wqwhPs1NU1GKO",
  "LL Acordeon P√©-de-Serra": "https://youtu.be/3h8xR4OmtH8?si=HDDBViN52uia_s6e",
  "LL Piseiro Drums v1.5": "https://youtu.be/6z0aRqURc4w?si=ZAI68b_qdnK2m7LA",
  "LL Metais v2": "https://youtu.be/RArd9zPafhQ?si=RxUhCsSuN9dj6kwk",
  "LL Piseiro Drums Summer": "https://youtu.be/iasVX_hPkS4?si=zFEf5FSzaeUu3yoV",
  "LL Acordeon Piseiro v2": "https://youtu.be/v5kv8za6-90?si=F6QpoqKaEO-KHMO2",
  "LL Arrocha Drums": "https://youtu.be/1C1FO1tHJyI?si=Sy9HazkMIzN6B5-2",
  "LL Guitarra Arrocha": "https://youtu.be/TUUs3lmy3Y0?si=XZPMvAvAMJP9_wvs",
  "LL Bass Arrocha": "https://youtu.be/7RV6pSg8waQ?si=bwoG2HBWWmoz64wL",
  "LL Arrocha Percuss√£o": "https://youtu.be/sOzFZulOUHQ?si=AFt8hQGvev1l01iS",
  "LL Cavaco Prime": "https://youtu.be/eIi__vQi14Q?si=-v1QjTikaAzMnNva",
  "LL Guitarra Distor√ß√£o": "https://youtu.be/ODTTJ7ZLjco?si=ZQcrh1wl9ZikOA77",
  "LL Arrasta-P√© Drums v1.5": "https://youtu.be/nke0JEdT8YA?si=pSY3Z1FoEqM6-z8N",
  "LL Viol√£o Arrocha v1.5": "https://youtu.be/SB7_pE15rbw?si=jISOG-WijwKaN1JT",
  "LL Guitarra Arrasta-P√©": "https://youtu.be/gCT1ernB7DI?si=2StyUzrHWL86OCtd",
  "LL Bass Arrasta-P√©": "https://youtu.be/0nPWAixsqhg?si=fob55xx8SAigoZiT",
  "LL Forr√≥ Rom√¢ntico Drums": "https://youtu.be/9bKunDA2A88?si=FOKFisqdS6SUo8te",
  "LL Metais v3": "https://youtu.be/S0CqRq9a4TI?si=x_XKZCWPNa0P3__1",
  "LL Iguinho e Lulinha Drums": "https://youtu.be/Sv2qJHQ0l-o?si=kjFKeJZelf_YbjBy",
  "LL Viol√£o Vaneira": "https://youtu.be/y50aOUzONBU?si=jzjUAtO2S5pVPZdf",
  "LL Pagode Drums e Percussion": "https://youtu.be/EHIwzcjL318?si=lI-5AlsOrgdU3BHn",
  "LL Guitarra Piseiro v3": "https://youtu.be/uJG_RXyoeP4?si=UquVv9MGLk8m6rcZ",
  "LL Bass Piseiro v2": "https://youtu.be/OcT97fnfB5M?si=L1JG-J7piPKxEdgq",
  "LL Drums Mari Fernandez": "https://youtu.be/BwIcLysROfM?si=1wk7wUq1fccgpRva",
  "LL Drums Z√© Felipe": "https://youtu.be/d10c7aQLPgM?si=8O2SNR05q4-jhNvA",
  "LL Drums Felipe Amorim": "https://youtu.be/iLb__-DAIO4?si=L7NsgoxhYTnqSev5",
  "LL Guitarra Calypso": "https://youtu.be/-dCxO11hSgc?si=lFhQdf2DKN2p91DH",
  "LL Acordeon Arrocha": "https://youtu.be/mO0MaAN0Uqg?si=LBGc3mUFK-6uR2Bw",
  "LL Viol√£o Pop v1": "https://youtu.be/nuG8_3bNz8w?si=cOG3BcY11sIK0xEy",
  "LL Vaneira Drums": "https://youtu.be/0DVtxwdI8t0?si=e86hWI8i5BfqHtUO",
  "LL Drums Manu Bahtid√£o": "https://youtu.be/FTg5oa1VHXU?si=ppkYm9OTD7LfU9iN",
  "LL Viol√£o Pagode e Samba": "https://youtu.be/dl40SSHThfg?si=yIaLKSAEyd5aKKQB",
  "LL Acordeon Vaneira": "https://youtu.be/NQ6KcXt1OXc?si=gJi4RsHg7QH576bm",
  "LL Cavaco Prime v2": "https://youtu.be/jN1uVwx0B88?si=LGZxUbdDudA6rrVr",
  "LL Ax√© Rythm v2": "https://youtu.be/AUXgiprtqhA?si=XhG7ITJLwblC_7nF",
  "LL Bass Ax√©": "https://youtu.be/bO-R5UNPgmY?si=4d5CmBYOEIrPnbBV",
  "LL Guitarra Ax√© v2": "https://youtu.be/NU6ewsQQaaY?si=glnHb9jepQEISCvm",
  "LL Pagod√£o Rythm v2": "https://youtu.be/h0BoTh6bUBQ?si=PsUqKrSxQ8yqDZ_V",
  "LL Guitarra Pagod√£o v2": "https://youtu.be/oMSuwiTPuKw?si=VCkhC7WR0Oa6AsjF",
  "LL Bass Pagod√£o": "https://youtu.be/u4ZRQfkwU8Q?si=6oqNIE8XVAoZ5aw7",
  "LL Guitarra Forrozao": "https://youtu.be/czN2vM06eqM?si=1FzGrgYj5dMwz_U5",
  "LL Bass Forrozao": "https://youtu.be/IEPn3MSkjJI?si=saLm4IQzeljGZNlb",
  "LL Bass Pagode": "https://youtu.be/Egn7F4w9ziQ?si=7PYeXL3GtEIbx5TR",
  "LL Viol√£o Pop v2": "https://youtu.be/jWlLr_bRMCM?si=agB7sYHkC7IdF7ml",
  "LL Acordeon Arrasta-P√©": "https://youtu.be/0gKTeQ0OJj0?si=kw9slO03p-DBL5K8",
  "LL Strings": "https://youtu.be/V5zqi4J0sWc?si=tJZFNLJ8IAknCE23",
  "LL Viol√£o Pop 6/8": "https://youtu.be/IZwjw__8pUw?si=MlB63xE8R900ERMw",
  "LL Forroz√£o Drums": "https://youtu.be/R-EOTJoi5bI?si=UcRkdrEWjk9iE4dU",
  "LL Forr√≥ Rom√¢ntico Drums v2": "https://youtu.be/yl484BqOu9w?si=SDv5syQUQKEBnYcW",
  "LL Arrocha Drums v2": "https://youtu.be/ev5jrDTqB2Q?si=E0ZmxbFXY-0Eh2wT",
  "LL Arrai√° Drums": "https://youtu.be/ij0IMy274_A?si=BFDgociu8m9dFmon",
  "LL Ukulele Prime": "https://youtu.be/Nz4ld0Bgd2k?si=SOfwzRx1ah7byiSl",
  "LL Calypso Drums": "https://youtu.be/DyMQWGG-eww?si=akWcilP1UY6ZKvfx",
  "LL Lambada Drums": "https://youtu.be/hSMQr-Jb978?si=RFGTX_6zH325DTPA",
  "LL Drums Henry Freitas": "https://youtu.be/xTR6MuZM1lU?si=aZmLhWs7_Q3xeB9v",
  "LL Drums Natanzinho Lima": "https://youtu.be/Knm8FoJ-z8M?si=E0wif0lIRbAt7IGN",
  "LL Guitarra Arrocha v2 ‚Äì Seresta": "https://youtu.be/uZHO0a083Oo?si=jHw5I-r7somFev9x",
  "LL Bass Arrocha v2 ‚Äì Seresta": "https://youtu.be/YnpQGQoL0i4?si=801jOc0ykr9aNH5c",
  "LL Drums Arrocha Safad√£o": "https://youtu.be/pA9_SCV2bPs?si=WIXq-aKjMMPu2-KL",
  "LL Bai√£o Drums": "https://youtu.be/q3uNB_Fts_M?si=mSP9s7Uobw-49iDY",
  "LL Drums Nattan Forr√≥": "https://youtu.be/O0bMyQ9-reo?si=MFPWuXzaiekS-Ff6",
  "LL Drums Desejo": "https://youtu.be/edbpb1HAJpM?si=J007U-ehQcdUPUYB",
  "LL Drums Seresta do Rasta": "https://youtu.be/Jl7dWRJVg5k?si=L8gWlKQ5LQzFmAz7",
  "LL Drums Leo Foguete": "https://youtu.be/Jl7dWRJVg5k?si=L8gWlKQ5LQzFmAz7",
  "LL Drums Marcynho Batidao": "https://www.youtube.com/watch?v=oIeRu7Le_iI",
  "LL Guitarra Pagodao v3": "https://www.youtube.com/watch?v=JmGsTXqFDU8",
  "LL Bass Pagodao v2": "https://www.youtube.com/watch?v=DrEmHweA0aU",
  "LL Keys Pagodao": "https://www.youtube.com/watch?v=8TE-0kQYAgE",
  "LL Pacote Produ√ß√£o Nattan": "https://www.youtube.com/watch?v=-u2iGSJMYc8",
  "LL Drums Guilherme Silva": "https://www.youtube.com/watch?v=egMYYporhgs",
  "LL Drums Arrasta-P√© v2": "https://www.youtube.com/watch?v=B-VnCfYLIj8",
  "LL Pacote Producao Arrasta-Pe (Completo)": "https://www.youtube.com/watch?v=B-VnCfYLIj8",
  "LL Pacote Producao Arrasta-Pe (Acomp)": "https://www.youtube.com/watch?v=B-VnCfYLIj8",
  "LL Drums Forrozin Os Feras": "https://www.youtube.com/watch?v=3ElrjIbD60U",
  "LL Drums Flavio Pizada Quente": "https://www.youtube.com/watch?v=8iLazzVOBiA",
  "LL Drums Thales Play": "https://www.youtube.com/watch?v=14pxiab-sYQ&pp=0gcJCQMKAYcqIYzv",
  "LL Violao Pop v3": "https://www.youtube.com/watch?v=k5tclbUGABc",
  "LL Drums Safadao Vaquejada": "https://www.youtube.com/watch?v=D-JNlJU4VDQ",
  "LL Drums Pablo": "https://www.youtube.com/watch?v=lb9FINdRGf4&t=8s",
  "LL Drums Claudio Ney e Juliana": "https://www.youtube.com/watch?v=J46vaIavi38",
  "LL Pacote Produ√ß√£o Claudio Ney e Juliana": "https://www.youtube.com/watch?v=J46vaIavi38",
  "LL Piano Rom√¢ntico": "https://www.youtube.com/watch?v=JgX_3tA4pGw&t=5s",
  "LL Drums Rey Vaqueiro": "https://www.youtube.com/watch?v=geBo5YDSsH4",
  "LL Drums Forr√≥ Boys": "https://www.youtube.com/watch?v=zjt75FJMJmM",
  "LL Drums Lux√∫ria": "https://www.youtube.com/watch?v=n8eJ6Q1Nq9A",
  "LL Pacote Produ√ß√£o Arrocha": "https://www.youtube.com/watch?v=YIuHRLtGSjU",
  "LL Pacote Produ√ß√£o Guilherme Silva": "https://www.youtube.com/watch?v=GF9Vlq8qOys",
  "LL Guitarra Forr√≥": "https://www.youtube.com/watch?v=76wm2WOucCs"
};




  // Clona a √°rea de pr√©via
  const clone = preview.cloneNode(true);

  // Remove mensagem longa do final, se existir
  const msgNode = clone.querySelector("#mensagemPronta");
  if (msgNode) msgNode.remove();

  // Varre todos os elementos do clone
  const allNodes = Array.from(clone.querySelectorAll("*"));

  allNodes.forEach(node => {
    if (!node.textContent) return;
    const text = node.textContent.trim();

    // Detecta itens de sample (que come√ßam com "‚Ä¢")
    if (text.startsWith("‚Ä¢")) {
      // Extrai o nome do pacote
      let nomePacote = text.replace(/^‚Ä¢\s*/, '').trim();
      nomePacote = nomePacote.split(' - ')[0].split('|')[0].trim();

      // Procura o objeto no array global samplesData
      let sampleObj = (typeof samplesData !== "undefined") ? samplesData.find(s => s.nome.trim() === nomePacote) : null;

      // Se n√£o achar, tenta match parcial
      if (!sampleObj && typeof samplesData !== "undefined") {
        sampleObj = samplesData.find(s => nomePacote.includes(s.nome.trim()) || s.nome.trim().includes(nomePacote));
      }

      // Adiciona o valor ao lado do nome
      if (sampleObj && typeof sampleObj.valor === "number") {
        const valorFormatado = sampleObj.valor.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        node.textContent = `‚Ä¢ ${nomePacote} - R$ ${valorFormatado}`;
      } else {
        node.textContent = `‚Ä¢ ${nomePacote}`;
      }

      // Adiciona link de v√≠deo destacado (se existir)
      if (videosDemo[nomePacote]) {
        const p = document.createElement("p");
        p.innerHTML = `üé• V√≠deo de demonstra√ß√£o: <a href="${videosDemo[nomePacote]}" target="_blank" style="
          color: #0078d7;
          text-decoration: none;
          font-weight: 600;
        ">${videosDemo[nomePacote]}</a>`;
        p.style.margin = "4px 0 10px";
        p.style.fontSize = "0.9em";
        p.style.color = "#222";
        node.parentNode.insertBefore(p, node.nextSibling);
      }
    }
  });

  // Mensagem promocional no final
  const aviso = document.createElement("p");
  aviso.textContent = "üìå Aproveite agora e garanta j√° o seu!";
  aviso.style.textAlign = "center";
  aviso.style.marginTop = "20px";
  aviso.style.fontWeight = "600";
  aviso.style.color = "#0078d7";
  clone.appendChild(aviso);

  // Configura√ß√£o do PDF
  const opt = {
    margin: 10,
    filename: 'Orcamento_LL_Samples_com_Videos.pdf',
    image: { type: 'jpeg', quality: 1 },
    html2canvas: { scale: 2, useCORS: true },
    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
  };

  // Gera o PDF com pre√ßos e links destacados
  html2pdf().set(opt).from(clone).save();
}




function copiarParteCima() {
  const preview = document.getElementById("previewArea");
  if (!preview) return alert("Gere o or√ßamento primeiro!");

  // Clona a pr√©via atual
  const clone = preview.cloneNode(true);

  // Remove a parte de baixo (mensagem final)
  const msgNode = clone.querySelector("#mensagemPronta");
  if (msgNode) msgNode.remove();

  // Fun√ß√£o auxiliar para normalizar nomes
  function normalizeName(n) {
    return n
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "")
      .replace(/[‚Äì‚Äî‚àí]/g, "-")
      .replace(/\s+/g, " ")
      .trim()
      .toLowerCase();
  }

  // Dicion√°rio de v√≠deos de demonstra√ß√£o (j√° deve existir em seu c√≥digo)
  const videosDemo = {
  //  "LL Metais": "https://youtu.be/KuUTx8NzAr4?si=lbaaAjGnjUO9IpJc",
    // "LL Sax v1.5": "https://youtu.be/YotFGV5IQl8?si=4ahVjkVZTQeqbfmK",
    // (... demais v√≠deos aqui ...)
  };

  // Obt√©m o texto bruto da pr√©via
  let texto = clone.innerText;

  // Limpeza e formata√ß√£o b√°sica
  texto = texto
    .replace(/\r/g, "")
    .replace(/[ \t]+/g, " ")
    .replace(/\n\s*\n\s*\n+/g, "\n\n")
    .trim()
    .replace(/^üéπ LL SAMPLES üéπ\s*/m, "üéπ LL SAMPLES üéπ\n\n")
    .replace(/üåü OR√áAMENTO ESPECIAL/g, " üåü OR√áAMENTO ESPECIAL")
    .replace(/\n{2,}üóíÔ∏èSAMPLES SELECIONADOS:/, "\n\nüóíÔ∏èSAMPLES SELECIONADOS:")
    .replace(/üóíÔ∏èSAMPLES SELECIONADOS:\s*\n*/g, "üóíÔ∏èSAMPLES SELECIONADOS:\n")
    .replace(/‚Ä¢\s*/g, "\n‚Ä¢ ")
    .replace(/\n{3,}/g, "\n\n");

  // Divide em linhas
  const linhas = texto.split("\n");
  const linhasComVideoEValor = [];

  for (let i = 0; i < linhas.length; i++) {
    const linha = linhas[i];
    if (!linha.trim()) {
      linhasComVideoEValor.push(linha);
      continue;
    }

    if (/^\s*‚Ä¢\s*/.test(linha)) {
      // Extrai nome do pacote
      let nomePacote = linha.replace(/^\s*‚Ä¢\s*/, "").trim();
      nomePacote = nomePacote.split(" - ")[0].split("|")[0].trim();
      const nomeNorm = normalizeName(nomePacote);

      // Busca o sample correspondente no samplesData
      let sampleObj = (typeof samplesData !== "undefined") ?
        samplesData.find(s => normalizeName(s.nome) === nomeNorm) : null;

      if (!sampleObj && typeof samplesData !== "undefined") {
        sampleObj = samplesData.find(s => {
          const sNorm = normalizeName(s.nome);
          return sNorm.includes(nomeNorm) || nomeNorm.includes(sNorm);
        });
      }

      // Adiciona o valor ao lado do nome
      if (sampleObj && typeof sampleObj.valor === "number") {
        const valorFormatado = sampleObj.valor.toLocaleString("pt-BR", {
          minimumFractionDigits: 2,
          maximumFractionDigits: 2,
        });
        linhasComVideoEValor.push(`‚Ä¢ ${nomePacote} - R$ ${valorFormatado}`);
      } else {
        linhasComVideoEValor.push(linha);
      }

      // Adiciona o link do v√≠deo, se houver
      if (videosDemo[nomePacote]) {
        linhasComVideoEValor.push(`üé• V√≠deo de demonstra√ß√£o: ${videosDemo[nomePacote]}`);
        linhasComVideoEValor.push(""); // espa√ßo entre os itens
      }
    } else {
      linhasComVideoEValor.push(linha);
    }
  }

  let textoFinal = linhasComVideoEValor.join("\n");

  // Linha em branco antes do valor bruto
  textoFinal = textoFinal.replace(/(‚Ä¢ [^\n]+)\n( üí∞ Valor Bruto)/, "$1\n\n$2");

  // Coloca o total PIX em it√°lico
  textoFinal = textoFinal.replace(/(üíµ Total Final \(PIX\): [^\n]+)/, "*$1*");

  // Melhora espa√ßamento entre blocos (compat√≠vel com WhatsApp)
  textoFinal = textoFinal
    .replace(/\n\n/g, "\n\u200B\n")
    .replace(/\n{3,}/g, "\n\u200B\n")
    .trim();

  // Copia para √°rea de transfer√™ncia
  navigator.clipboard.writeText(textoFinal)
    .then(() => alert("Parte de cima copiada com valores e links de demonstra√ß√£o!"))
    .catch(() => alert("Erro ao copiar."));
}


function copiarParteCimaComVideos() {
  const preview = document.getElementById("previewArea");
  if (!preview) return alert("Gere o or√ßamento primeiro!");

  // Dicion√°rio de v√≠deos de demonstra√ß√£o
 const videosDemo = {
  "LL Metais": "https://youtu.be/KuUTx8NzAr4?si=lbaaAjGnjUO9IpJc",
  "LL Sax v1.5": "https://youtu.be/YotFGV5IQl8?si=4ahVjkVZTQeqbfmK",
  "LL Piseiro Drums v1": "https://youtu.be/OnQKHjpjvaQ?si=hbo9pwX4DWucZPSb",
  "LL Bass Piseiro v1": "https://youtu.be/5K1IOqGaP6g?si=PYO9vBxuCGhiZkbR",
  "LL WS Drums": "https://youtu.be/8onKDOVKCxE?si=HcoB1ZkR_9_UjRS5",
  "LL Guitarra Piseiro v1": "https://youtu.be/rUvw79orXZg?si=q4JE8l1OrC4MuXQy",
  "LL Acordeon Piseiro": "https://youtu.be/wzNRhtxSIx0?si=yjudaYtzgVWlj7r6",
  "LL Percussao Piseiro": "https://youtu.be/I2Tu68topUU?si=IfW2expvkG41K0Po",
  "LL Bregadeira Drums": "https://youtu.be/IJNOLjdF_8o?si=BN-dy24wlx2L5giT",
  "LL Guitarra Bregadeira": "https://youtu.be/93LWdjfAIfg?si=oIe6KFojIkQZO8XR",
  "LL P√© de Serra Drums": "https://youtu.be/LAh_N1dgdRI?si=kq3wqwhPs1NU1GKO",
  "LL Acordeon P√©-de-Serra": "https://youtu.be/3h8xR4OmtH8?si=HDDBViN52uia_s6e",
  "LL Piseiro Drums v1.5": "https://youtu.be/6z0aRqURc4w?si=ZAI68b_qdnK2m7LA",
  "LL Metais v2": "https://youtu.be/RArd9zPafhQ?si=RxUhCsSuN9dj6kwk",
  "LL Piseiro Drums Summer": "https://youtu.be/iasVX_hPkS4?si=zFEf5FSzaeUu3yoV",
  "LL Acordeon Piseiro v2": "https://youtu.be/v5kv8za6-90?si=F6QpoqKaEO-KHMO2",
  "LL Arrocha Drums": "https://youtu.be/1C1FO1tHJyI?si=Sy9HazkMIzN6B5-2",
  "LL Guitarra Arrocha": "https://youtu.be/TUUs3lmy3Y0?si=XZPMvAvAMJP9_wvs",
  "LL Bass Arrocha": "https://youtu.be/7RV6pSg8waQ?si=bwoG2HBWWmoz64wL",
  "LL Arrocha Percuss√£o": "https://youtu.be/sOzFZulOUHQ?si=AFt8hQGvev1l01iS",
  "LL Cavaco Prime": "https://youtu.be/eIi__vQi14Q?si=-v1QjTikaAzMnNva",
  "LL Guitarra Distor√ß√£o": "https://youtu.be/ODTTJ7ZLjco?si=ZQcrh1wl9ZikOA77",
  "LL Arrasta-P√© Drums v1.5": "https://youtu.be/nke0JEdT8YA?si=pSY3Z1FoEqM6-z8N",
  "LL Viol√£o Arrocha v1.5": "https://youtu.be/SB7_pE15rbw?si=jISOG-WijwKaN1JT",
  "LL Guitarra Arrasta-P√©": "https://youtu.be/gCT1ernB7DI?si=2StyUzrHWL86OCtd",
  "LL Bass Arrasta-P√©": "https://youtu.be/0nPWAixsqhg?si=fob55xx8SAigoZiT",
  "LL Forr√≥ Rom√¢ntico Drums": "https://youtu.be/9bKunDA2A88?si=FOKFisqdS6SUo8te",
  "LL Metais v3": "https://youtu.be/S0CqRq9a4TI?si=x_XKZCWPNa0P3__1",
  "LL Iguinho e Lulinha Drums": "https://youtu.be/Sv2qJHQ0l-o?si=kjFKeJZelf_YbjBy",
  "LL Viol√£o Vaneira": "https://youtu.be/y50aOUzONBU?si=jzjUAtO2S5pVPZdf",
  "LL Pagode Drums e Percussion": "https://youtu.be/EHIwzcjL318?si=lI-5AlsOrgdU3BHn",
  "LL Guitarra Piseiro v3": "https://youtu.be/uJG_RXyoeP4?si=UquVv9MGLk8m6rcZ",
  "LL Bass Piseiro v2": "https://youtu.be/OcT97fnfB5M?si=L1JG-J7piPKxEdgq",
  "LL Drums Mari Fernandez": "https://youtu.be/BwIcLysROfM?si=1wk7wUq1fccgpRva",
  "LL Drums Z√© Felipe": "https://youtu.be/d10c7aQLPgM?si=8O2SNR05q4-jhNvA",
  "LL Drums Felipe Amorim": "https://youtu.be/iLb__-DAIO4?si=L7NsgoxhYTnqSev5",
  "LL Guitarra Calypso": "https://youtu.be/-dCxO11hSgc?si=lFhQdf2DKN2p91DH",
  "LL Acordeon Arrocha": "https://youtu.be/mO0MaAN0Uqg?si=LBGc3mUFK-6uR2Bw",
  "LL Viol√£o Pop v1": "https://youtu.be/nuG8_3bNz8w?si=cOG3BcY11sIK0xEy",
  "LL Vaneira Drums": "https://youtu.be/0DVtxwdI8t0?si=e86hWI8i5BfqHtUO",
  "LL Drums Manu Bahtid√£o": "https://youtu.be/FTg5oa1VHXU?si=ppkYm9OTD7LfU9iN",
  "LL Viol√£o Pagode e Samba": "https://youtu.be/dl40SSHThfg?si=yIaLKSAEyd5aKKQB",
  "LL Acordeon Vaneira": "https://youtu.be/NQ6KcXt1OXc?si=gJi4RsHg7QH576bm",
  "LL Cavaco Prime v2": "https://youtu.be/jN1uVwx0B88?si=LGZxUbdDudA6rrVr",
  "LL Ax√© Rythm v2": "https://youtu.be/AUXgiprtqhA?si=XhG7ITJLwblC_7nF",
  "LL Bass Ax√©": "https://youtu.be/bO-R5UNPgmY?si=4d5CmBYOEIrPnbBV",
  "LL Guitarra Ax√© v2": "https://youtu.be/NU6ewsQQaaY?si=glnHb9jepQEISCvm",
  "LL Pagod√£o Rythm v2": "https://youtu.be/h0BoTh6bUBQ?si=PsUqKrSxQ8yqDZ_V",
  "LL Guitarra Pagod√£o v2": "https://youtu.be/oMSuwiTPuKw?si=VCkhC7WR0Oa6AsjF",
  "LL Bass Pagodao": "https://youtu.be/u4ZRQfkwU8Q?si=6oqNIE8XVAoZ5aw7",
  "LL Guitarra Forrozao": "https://youtu.be/czN2vM06eqM?si=1FzGrgYj5dMwz_U5",
  "LL Bass Forrozao": "https://youtu.be/IEPn3MSkjJI?si=saLm4IQzeljGZNlb",
  "LL Bass Pagode": "https://youtu.be/Egn7F4w9ziQ?si=7PYeXL3GtEIbx5TR",
  "LL Violao Pop v2": "https://youtu.be/jWlLr_bRMCM?si=agB7sYHkC7IdF7ml",
  "LL Acordeon Arrasta-Pe": "https://youtu.be/0gKTeQ0OJj0?si=kw9slO03p-DBL5K8",
  "LL Strings": "https://youtu.be/V5zqi4J0sWc?si=tJZFNLJ8IAknCE23",
  "LL Viol√£o Pop 6/8": "https://youtu.be/IZwjw__8pUw?si=MlB63xE8R900ERMw",
  "LL Forroz√£o Drums": "https://youtu.be/R-EOTJoi5bI?si=UcRkdrEWjk9iE4dU",
  "LL Forr√≥ Rom√¢ntico Drums v2": "https://youtu.be/yl484BqOu9w?si=SDv5syQUQKEBnYcW",
  "LL Arrocha Drums v2": "https://youtu.be/ev5jrDTqB2Q?si=E0ZmxbFXY-0Eh2wT",
  "LL Arrai√° Drums": "https://youtu.be/ij0IMy274_A?si=BFDgociu8m9dFmon",
  "LL Ukulele Prime": "https://youtu.be/Nz4ld0Bgd2k?si=SOfwzRx1ah7byiSl",
  "LL Calypso Drums": "https://youtu.be/DyMQWGG-eww?si=akWcilP1UY6ZKvfx",
  "LL Lambada Drums": "https://youtu.be/hSMQr-Jb978?si=RFGTX_6zH325DTPA",
  "LL Drums Henry Freitas": "https://youtu.be/xTR6MuZM1lU?si=aZmLhWs7_Q3xeB9v",
  "LL Drums Natanzinho Lima": "https://youtu.be/Knm8FoJ-z8M?si=E0wif0lIRbAt7IGN",
  "LL Guitarra Arrocha Seresta v2": "https://youtu.be/uZHO0a083Oo?si=jHw5I-r7somFev9x",
  "LL Bass Arrocha Seresta v2": "https://youtu.be/YnpQGQoL0i4?si=801jOc0ykr9aNH5c",
  "LL Drums Arrocha Safad√£o": "https://youtu.be/pA9_SCV2bPs?si=WIXq-aKjMMPu2-KL",
  "LL Bai√£o Drums": "https://youtu.be/q3uNB_Fts_M?si=mSP9s7Uobw-49iDY",
  "LL Drums Nattan Forr√≥": "https://youtu.be/O0bMyQ9-reo?si=MFPWuXzaiekS-Ff6",
  "LL Drums Desejo": "https://youtu.be/edbpb1HAJpM?si=J007U-ehQcdUPUYB",
  "LL Drums Seresta do Rasta": "https://youtu.be/Jl7dWRJVg5k?si=L8gWlKQ5LQzFmAz7",
  "LL Drums Leo Foguete": "https://youtu.be/Jl7dWRJVg5k?si=L8gWlKQ5LQzFmAz7",
  "LL Drums Marcynho Batidao": "https://www.youtube.com/watch?v=oIeRu7Le_iI",
  "LL Guitarra Pagodao v3": "https://www.youtube.com/watch?v=JmGsTXqFDU8",
  "LL Bass Pagodao v2": "https://www.youtube.com/watch?v=DrEmHweA0aU",
  "LL Keys Pagodao": "https://www.youtube.com/watch?v=8TE-0kQYAgE",
  "LL Pacote Produ√ß√£o Nattan": "https://www.youtube.com/watch?v=-u2iGSJMYc8",
  "LL Drums Guilherme Silva": "https://www.youtube.com/watch?v=egMYYporhgs",
  "LL Drums Arrasta-P√© v2": "https://www.youtube.com/watch?v=B-VnCfYLIj8",
  "LL Pacote Producao Arrasta-Pe (Completo)": "https://www.youtube.com/watch?v=B-VnCfYLIj8",
  "LL Pacote Producao Arrasta-Pe (Acomp)": "https://www.youtube.com/watch?v=B-VnCfYLIj8",
  "LL Drums Forrozin Os Feras": "https://www.youtube.com/watch?v=3ElrjIbD60U",
  "LL Drums Flavio Pizada Quente": "https://www.youtube.com/watch?v=8iLazzVOBiA",
  "LL Drums Thales Play": "https://www.youtube.com/watch?v=14pxiab-sYQ&pp=0gcJCQMKAYcqIYzv",
  "LL Violao Pop v3": "https://www.youtube.com/watch?v=k5tclbUGABc",
  "LL Drums Safadao Vaquejada": "https://www.youtube.com/watch?v=D-JNlJU4VDQ",
  "LL Drums Pablo": "https://www.youtube.com/watch?v=lb9FINdRGf4&t=8s",
  "LL Drums Claudio Ney e Juliana": "https://www.youtube.com/watch?v=J46vaIavi38",
  "LL Pacote Produ√ß√£o Claudio Ney e Juliana": "https://www.youtube.com/watch?v=J46vaIavi38",
  "LL Piano Rom√¢ntico": "https://www.youtube.com/watch?v=JgX_3tA4pGw&t=5s",
  "LL Drums Rey Vaqueiro": "https://www.youtube.com/watch?v=geBo5YDSsH4",
  "LL Drums Forr√≥ Boys": "https://www.youtube.com/watch?v=zjt75FJMJmM",
  "LL Drums Lux√∫ria": "https://www.youtube.com/watch?v=n8eJ6Q1Nq9A",
  "LL Pacote Produ√ß√£o Arrocha": "https://www.youtube.com/watch?v=YIuHRLtGSjU",
  "LL Pacote Produ√ß√£o Guilherme Silva": "https://www.youtube.com/watch?v=GF9Vlq8qOys",
  "LL Bass Forro Romantico": "https://www.youtube.com/watch?v=L8wgsiVASb0",
  "LL Forro Romantico Drums v2": "https://www.youtube.com/watch?v=yl484BqOu9w",
  "LL Arraia Drums": "https://www.youtube.com/watch?v=ij0IMy274_A",
  "LL Forrozao Drums v1.1": "https://www.youtube.com/watch?v=jEp5ZXmy0ik",
  "LL Forro Vaneirao Drums": "https://www.youtube.com/watch?v=J2SWJlwefvo",
  "LL Violao Pop 6-8": "https://www.youtube.com/watch?v=IZwjw__8pUw",
  "LL Acordeon Forrozao": "https://www.youtube.com/watch?v=SOjvoOpe6jA",
  "LL Guitarra Forr√≥": "https://www.youtube.com/watch?v=76wm2WOucCs"
};

  // Clona a pr√©via atual
  const clone = preview.cloneNode(true);

  // Remove a parte de baixo (mensagem final)
  const msgNode = clone.querySelector("#mensagemPronta");
  if (msgNode) msgNode.remove();

  // Pega o texto bruto da pr√©via
  let texto = clone.innerText;

  // Normaliza espa√ßamentos e formata
  texto = texto
    .replace(/\r/g, '')
    .replace(/[ \t]+/g, ' ')
    .replace(/\n\s*\n\s*\n+/g, '\n\n')
    .trim();

  texto = texto
    .replace(/^üéπ LL SAMPLES üéπ\s*/m, 'üéπ LL SAMPLES üéπ\n\n')
    .replace(/üåü OR√áAMENTO ESPECIAL/g, ' üåü OR√áAMENTO ESPECIAL')
    .replace(/\n{2,}üóíÔ∏èSAMPLES SELECIONADOS:/, '\n\nüóíÔ∏èSAMPLES SELECIONADOS:')
    .replace(/üóíÔ∏èSAMPLES SELECIONADOS:\s*\n*/g, 'üóíÔ∏èSAMPLES SELECIONADOS:\n')
    .replace(/‚Ä¢\s*/g, '\n‚Ä¢ ')
    .replace(/\n{3,}/g, '\n\n');

  // üîπ Adiciona links de v√≠deo ap√≥s cada sample
  const linhas = texto.split('\n');
  const linhasComVideo = [];
  for (let i = 0; i < linhas.length; i++) {
    const linha = linhas[i];
    linhasComVideo.push(linha);

    if (/^\s*‚Ä¢\s*/.test(linha)) {
      let nomePacote = linha.replace(/^\s*‚Ä¢\s*/, '').trim();
      nomePacote = nomePacote.split(' - ')[0].split('|')[0].trim();

      if (videosDemo[nomePacote]) {
        linhasComVideo.push(`üé• V√≠deo de demonstra√ß√£o: ${videosDemo[nomePacote]}`);
        linhasComVideo.push('');
      }
    }
  }

  let textoFinal = linhasComVideo.join('\n');

  // Ajusta espa√ßamento e negrito/it√°lico para WhatsApp
  textoFinal = textoFinal
    .replace(/(üíµ Total Final \(PIX\): [^\n]+)/, '*$1*')
    .replace(/\n\n/g, '\n\u200B\n')
    .replace(/\n{3,}/g, '\n\u200B\n')
    .trim();

  navigator.clipboard.writeText(textoFinal)
    .then(() => alert("Parte de cima copiada com v√≠deos de demonstra√ß√£o! üé•"))
    .catch(() => alert("Erro ao copiar."));
}



function copiarParteBaixo() {
  const msgNode = document.getElementById("mensagemPronta");
  if (!msgNode) return alert("Gere o or√ßamento primeiro!");

  const texto = msgNode.innerText.trim();
  navigator.clipboard.writeText(texto)
    .then(() => alert("Parte de baixo copiada!"))
    .catch(() => alert("Erro ao copiar."));
}



</script>
</body>
</html>

